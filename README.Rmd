---
output: github_document
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# boundariesNSW

<!-- badges: start -->
<!-- badges: end -->

The goal of boundariesNSW is to simplify the acquisition and use of NSW boundary shapefiles
for **simple plotting tasks**. The package has simply obtained various shapefiles, simplified
spatial objects (remove unnecessary fields), converted to geojson, and 
created helper functions to import them into your R environment, or export them to a chosen 
directory.

source https://dbr.abs.gov.au/absmaps/index.html

Current shape files:

 - Local Government Area 2016; lga2016-geojson.gzip  
 - Local Government Area 2019; lga2019-geojson.gzip  
 - Local Health District 2010; lhd2010-geojson.gzip  
 - Postal Areas 2016; poa2016-geojson.gzip 
 - Greater Capital City Statistical Area 2016; gccsa2016-geojson.gzip  
 
These generally have boundary codes and names to join with other data.

## Installation

```{r, eval = F}
devtools::install_github("Shaunson26/boundariesNSW")
```

```{r}
library(boundariesNSW)
```

## Usage

### list_maps()

The geojson are stored in the `extdata/` folder of the package installation directory.
We can list them with the function `list_maps()`. This function is just a wrapper for
`list.files()` and we can use the `full.names = TRUE` to list the full file path if required.
However, the next function `get_map()` will handle extraction and importing.

```{r}
list_maps(full.names = FALSE)
```

### get_map()

`get_map()` imports a chosen boundary into your R environment as an `sf` object.

```{r}
# Import LGA2019 into R
# * return_sf_object = TRUE is default
lga2019 <- get_map(boundary = 'lga2019', return_sf_object = TRUE)
```

`get_map()` has the option of just exporting the map to a chosen directory. In this
example, the geojson is extracted to the given location and not imported to R.

```{r}
get_map(boundary = 'lga2019', geojson_extract_location = 'C:/Users/60141508', return_sf_object = FALSE)
```

### simplify_map

The default maps are often of too high resolution for regular tasks and take time to plot. We
can simplify the maps using `simplify_map()`. This is just a wrapper to the 
`rmapshaper::ms_simplify(keep_proportion = 0.1, keep_shapes = TRUE)`. You will find that plotting
is faster, and that boundaries are less fuzzy when you do this.

```{r, message=FALSE, fig.height=4}
library(ggplot2)

ggplot(lga2019) +
  geom_sf() +
  theme_void()

lga2019_min <- simplify_map(lga2019, keep_proportion = 0.25)

# Notice clearer boundaries
ggplot(lga2019_min) +
  geom_sf() +
  theme_void()
```

## TODO

  - Add other boundaries  
  - Add tests

